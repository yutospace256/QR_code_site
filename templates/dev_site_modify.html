<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>QR Code Poonts</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1">


</head>
<body>
    <header>
        <h1>Welcome to Site Data Modify for {{ site_number }}!</h1>  
    </header>

    <table>
        <tbody>
        <caption style="margin:10px">Current Site Data: {{ site_number }}</caption><br>
          <tr>
            <th>Site Type</th>
            <th>Points</th>
            <th>Title</th>
            <th>HP</th>
            <th>Question</th>
          </tr>
            <tr onclick="redirectToSiteModify('{{ current_site_data[2] }}')">
                <td>{{ current_site_data["site_type"] }}</td>
                <td>{{ current_site_data["points"] }}</td>
                <td>{{ current_site_data["title"] }}</td>
                <td>{{ current_site_data["hp"] }}</td>
                <td>{{ current_site_data["question"] }}</td>
            </tr>
        </tbody>
    </table>

    {% if current_site_data["site_type"] == 2 %}
        <table>
            <tbody>
            <caption style="margin:10px">Current Choices Data: {{ site_number }}</caption><br>
            <tr>
                <th>Choice Value</th>
                <th>Choice Text</th>
            </tr>
            {% for choice in current_choices_data %}
                <tr>
                <td>{{ choice["value"] }}</td>
                <td>{{ choice["choice"] }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <b>Modify Base Site Data</b>
    <form name="column_form" method="POST" action="/dev_site_modify?site={{ current_site_data["site_number"] }}">
        <input type="hidden" name="form_type" value="columns">
        {% if current_site_data["site_type"] == 1 %}
            <fieldset>
                <legend>Columns</legend>
                <input type="radio" name="columns" value="points" id="points" checked>
                <label for="points">Points</label>
                <input type="radio" name="columns" value="title" id="title">
                <label for="title">Title</label>
            </fieldset>
        {% elif current_site_data["site_type"] == 2 %}
            <fieldset>
                <legend>Columns</legend>
                <input type="radio" name="columns" value="points" id="points"checked>
                <label for="points">Points</label>
                <input type="radio" name="columns" value="title" id="title">
                <label for="title">Title</label>
                <input type="radio" name="columns" value="question" id="question">
                <label for="question">Question</label>
            </fieldset>
        {% elif current_site_data["site_type"] == 3 %}
            <fieldset>
                <legend>Columns</legend>
                <input type="radio" name="columns" value="points" id="points"checked>
                <label for="points">Points</label>
                <input type="radio" name="columns" value="title" id="title">
                <label for="title">Title</label>
                <input type="radio" name="columns" value="hp" id="hp">
                <label for="hp">HP</label>
            </fieldset>
        {% endif %}
    
        <label for="text_input">Text:</label>
        <input type="text" name="text_input" id="text_input">
        <br>
        <button type="submit">Submit</button>
    </form>

    {% if current_site_data["site_type"] == 2 %}
        <b>Modify Choices Data</b>
        <form name="create_choices" method="POST" action="/dev_site_modify?site={{ current_site_data["site_number"] }}">
            <input type="hidden" name="form_type" value="choices">
            <fieldset>
                <legend>Choices</legend>
                <!-- Create CHOICE in a form of 100 characters or less. -->
                <input type="radio" name="choice_value" value="0" id="choice_value_1" checked>
                <label for="choice_value_1" class="choice">0: Correct</label>
                <input type="radio" name="choice_value" value="X" id="choice_value_2">
                <label for="choice_value_2" class="choice">X: Incorrect</label>
            </fieldset>
            <br>
            <!-- Create CHOICE in a form of 100 characters or less. -->
            <label for="choice_text" class="choice">Choice Text:</label>
            <input type="text" id="choice_text" name="choice_text" class="text" maxlength="256">
            <br>
            <button type="submit">Add Choices</button>
            <input type="hidden" name="progress" value="step2">
            <input type="hidden" name="new_site_number" value="{{ new_site_number }}">
        </form>    
        <b>Delete Choice</b>
        <form name="delete_choices" method="POST" action="/dev_site_modify?site={{ current_site_data["site_number"] }}">
            <input type="hidden" name="form_type" value="delete">
            <fieldset>
                <legend>Choices</legend>
                <!-- Create CHOICE in a form of 100 characters or less. -->
                {% for loop_count in range(current_choices_data|length) %}
                    <input type="radio" name="choice_count" value="{{ loop_count }}" id="choice_{{ loop_count }}">
                    <label for="choice_{{ loop_count }}" class="choice">{{ current_choices_data[loop_count]["value"] }}: {{ current_choices_data[loop_count]["choice"] }}</label>
                {% endfor %}
            </fieldset>
            <br>
            <button type="submit">Delete Choices</button>
        </form>
    {% endif %}
    <a href="{{ url_for('dev_create_site') }}"><button class="back">Back</button></a>
</body>
</html>